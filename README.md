# AI Image Generator - æ™ºè°±CogView-4å›¾åƒç”Ÿæˆå™¨

åŸºäºæ™ºè°±AI CogView-4ç³»åˆ—æ¨¡å‹çš„é«˜è´¨é‡å›¾åƒç”Ÿæˆç³»ç»Ÿï¼Œæ”¯æŒå¤šç§ç”Ÿæˆæ¨¡å¼å’Œä¸°å¯Œçš„è‡ªå®šä¹‰é€‰é¡¹ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ¨ **é«˜è´¨é‡å›¾åƒç”Ÿæˆ**: åŸºäºæ™ºè°±CogView-4ç³»åˆ—æ¨¡å‹
- ğŸ”§ **å¤šæ¨¡å‹æ”¯æŒ**: CogView-4ã€CogView-4-250304ã€CogView-3-Flash
- ğŸ“ **å¤šç§å°ºå¯¸é€‰æ‹©**: æ”¯æŒ1024x1024ã€1024x768ã€768x1024ç­‰å¤šç§å°ºå¯¸
- ğŸ¯ **è´¨é‡æ§åˆ¶**: æ ‡å‡†è´¨é‡å’Œé«˜æ¸…è´¨é‡é€‰é¡¹
- ğŸŒ **Webç•Œé¢**: ç°ä»£åŒ–çš„å“åº”å¼Webç•Œé¢
- ğŸ”Œ **MCPæœåŠ¡å™¨**: æ”¯æŒModel Context Protocol
- ğŸ“¦ **æ‰¹é‡ç”Ÿæˆ**: æ”¯æŒæ‰¹é‡å›¾åƒç”Ÿæˆ
- ğŸ’¾ **è‡ªåŠ¨ä¿å­˜**: è‡ªåŠ¨ä¸‹è½½å¹¶ä¿å­˜ç”Ÿæˆçš„å›¾åƒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- æ™ºè°±AI APIå¯†é’¥

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨uvå®‰è£…ä¾èµ–ï¼ˆæ¨èï¼‰
uv sync

# æˆ–ä½¿ç”¨pipå®‰è£…
pip install -r requirements.txt
```

### é…ç½®APIå¯†é’¥

åˆ›å»º `config.json` æ–‡ä»¶ï¼š

```json
{
  "api_keys": {
    "zhipu": "your_zhipu_api_key_here"
  }
}
```

æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export ZHIPU_API_KEY="your_zhipu_api_key_here"
```
### MCPé…ç½®
{
  "mcpServers":{
    "mcp-image-generator": {
      "disabled": false,
      "timeout": 60,
      "type": "sse",
      "url": "http://127.0.0.1:8000/sse"
    }
  }
}

### è¿è¡Œæ–¹å¼

#### 1. Webç•Œé¢æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
python image_server.py
```

ç„¶åè®¿é—® http://localhost:5000

#### 2. äº¤äº’å¼å‘½ä»¤è¡Œæ¨¡å¼

```bash
python main.py
```

#### 3. MCPæœåŠ¡å™¨æ¨¡å¼

```bash
python main.py --mcp
```

## ğŸ¯ æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | æè¿° | ç‰¹ç‚¹ |
|------|------|------|
| cogview-4 | CogView-4æœ€æ–°æ¨¡å‹ | é«˜è´¨é‡è¾“å‡ºï¼Œæ¨èä½¿ç”¨ |
| cogview-4-250304 | CogView-4ä¼˜åŒ–ç‰ˆæœ¬ | æ›´å¿«çš„ç”Ÿæˆé€Ÿåº¦ |
| cogview-3-flash | CogView-3å¿«é€Ÿæ¨¡å‹ | å¿«é€Ÿç”Ÿæˆï¼Œé€‚åˆæ‰¹é‡å¤„ç† |

## ğŸ“ æ”¯æŒçš„å›¾åƒå°ºå¯¸

- **1024x1024** - æ­£æ–¹å½¢ï¼ˆæ¨èï¼‰
- **1024x768** - æ¨ªå‘
- **768x1024** - çºµå‘
- **768x768** - ä¸­ç­‰æ­£æ–¹å½¢
- **512x512** - å°å°ºå¯¸

## ğŸ¨ ä½¿ç”¨ç¤ºä¾‹

### Python APIè°ƒç”¨

```python
from zhipu_image_client import ZhipuImageClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = ZhipuImageClient()

# ç”Ÿæˆå›¾åƒ
result = client.generate_and_save_image(
    prompt="ä¸€åªå¯çˆ±çš„æŸ¯åŸºçŠ¬åœ¨æ¨±èŠ±æ ‘ä¸‹å¥”è·‘",
    model="cogview-4",
    size="1024x1024",
    quality="standard"
)

if result["success"]:
    print(f"å›¾åƒå·²ä¿å­˜åˆ°: {result['file_path']}")
    print(f"å›¾åƒURL: {result['image_url']}")
else:
    print(f"ç”Ÿæˆå¤±è´¥: {result['error']}")
```

### æ‰¹é‡ç”Ÿæˆ

```python
# æ‰¹é‡ç”Ÿæˆå¤šå¼ å›¾åƒ
prompts = [
    "ä¸€åªæ©˜çŒ«åœ¨é˜³å…‰ä¸‹æ‰“ç›¹",
    "æœªæ¥ç§‘æŠ€åŸå¸‚å¤œæ™¯",
    "æ°´å½©ç”»é£æ ¼çš„å±±æ°´ç”»"
]

result = client.batch_generate_images(
    prompts=prompts,
    model="cogview-4",
    size="1024x1024"
)

print(f"æˆåŠŸç”Ÿæˆ: {result['successful']}/{result['total']} å¼ å›¾åƒ")
```

### MCPå·¥å…·è°ƒç”¨

```python
# ç”Ÿæˆå›¾åƒ
generate_image_from_prompt(
    prompt="ä¸€æœµçº¢è‰²çš„ç«ç‘°èŠ±",
    model="cogview-4",
    size="1024x1024",
    quality="hd",
    save_file=True
)

# æ‰¹é‡ç”Ÿæˆ
batch_generate_images(
    prompts=["çŒ«å’ª", "ç‹—ç‹—", "å…”å­"],
    model="cogview-3-flash",
    size="512x512"
)

# è·å–æ”¯æŒçš„é€‰é¡¹
get_supported_options()

# æµ‹è¯•APIè¿æ¥
test_image_api("æµ‹è¯•å›¾åƒ")
```

## ğŸŒ Webç•Œé¢åŠŸèƒ½

- **æ™ºèƒ½æç¤ºè¯è¾“å…¥**: æ”¯æŒå¤šè¡Œæ–‡æœ¬è¾“å…¥å’Œç¤ºä¾‹æç¤ºè¯
- **å‚æ•°é…ç½®**: å¯è§†åŒ–é€‰æ‹©æ¨¡å‹ã€å°ºå¯¸å’Œè´¨é‡
- **å®æ—¶é¢„è§ˆ**: ç”Ÿæˆåç«‹å³æ˜¾ç¤ºå›¾åƒ
- **å†å²è®°å½•**: ä¿å­˜æœ€è¿‘çš„ç”Ÿæˆå†å²
- **ä¸‹è½½åŠŸèƒ½**: ä¸€é”®ä¸‹è½½ç”Ÿæˆçš„å›¾åƒ
- **APIçŠ¶æ€ç›‘æ§**: å®æ—¶æ˜¾ç¤ºAPIè¿æ¥çŠ¶æ€

## ğŸ“ é¡¹ç›®ç»“æ„

```
AI-Image-Generator/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ zhipu_image_client.py   # æ™ºè°±å›¾åƒç”Ÿæˆå®¢æˆ·ç«¯
â”œâ”€â”€ image_server.py         # WebæœåŠ¡å™¨
â”œâ”€â”€ image_interface.html    # Webç•Œé¢
â”œâ”€â”€ network_diagnostic.py   # ç½‘ç»œè¯Šæ–­å·¥å…·
â”œâ”€â”€ config.json            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ outputs/               # è¾“å‡ºç›®å½•
â””â”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
```

## ğŸ”§ é…ç½®é€‰é¡¹

### APIé…ç½®

```json
{
  "api_keys": {
    "zhipu": "your_api_key"
  },
  "api_settings": {
    "timeout": 120,
    "max_retries": 3,
    "base_url": "https://open.bigmodel.cn/api/paas/v4/images/generations"
  }
}
```

### ç”Ÿæˆå‚æ•°

- **prompt**: å›¾åƒæè¿°æç¤ºè¯ï¼ˆå¿…éœ€ï¼‰
- **model**: ç”Ÿæˆæ¨¡å‹ï¼ˆé»˜è®¤: cogview-4ï¼‰
- **size**: å›¾åƒå°ºå¯¸ï¼ˆé»˜è®¤: 1024x1024ï¼‰
- **quality**: å›¾åƒè´¨é‡ï¼ˆé»˜è®¤: standardï¼‰

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å‹

1. åœ¨ `zhipu_image_client.py` ä¸­æ›´æ–° `image_models` å­—å…¸
2. ç¡®ä¿APIæ”¯æŒæ–°æ¨¡å‹
3. æ›´æ–°Webç•Œé¢çš„æ¨¡å‹é€‰é¡¹

### è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼

```python
# ä¿®æ”¹ä¿å­˜æ ¼å¼
def save_custom_format(self, image_data, filename, format="png"):
    # è‡ªå®šä¹‰ä¿å­˜é€»è¾‘
    pass
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **APIå¯†é’¥é”™è¯¯**
   - æ£€æŸ¥config.jsonä¸­çš„APIå¯†é’¥
   - ç¡®è®¤ç¯å¢ƒå˜é‡ZHIPU_API_KEYè®¾ç½®æ­£ç¡®

2. **ç½‘ç»œè¿æ¥é—®é¢˜**
   - è¿è¡Œç½‘ç»œè¯Šæ–­: `python network_diagnostic.py`
   - æ£€æŸ¥é˜²ç«å¢™å’Œä»£ç†è®¾ç½®

3. **å›¾åƒç”Ÿæˆå¤±è´¥**
   - æ£€æŸ¥æç¤ºè¯æ˜¯å¦åŒ…å«æ•æ„Ÿå†…å®¹
   - å°è¯•ä½¿ç”¨ä¸åŒçš„æ¨¡å‹æˆ–å‚æ•°

4. **Webç•Œé¢æ— æ³•è®¿é—®**
   - ç¡®è®¤ç«¯å£5000æœªè¢«å ç”¨
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export LOG_LEVEL=DEBUG
python main.py
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨ `cogview-3-flash` æ¨¡å‹è·å¾—æ›´å¿«çš„ç”Ÿæˆé€Ÿåº¦
- æ‰¹é‡ç”Ÿæˆæ—¶é€‚å½“å¢åŠ å»¶è¿Ÿé¿å…APIé™åˆ¶
- é€‰æ‹©åˆé€‚çš„å›¾åƒå°ºå¯¸å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- æ™ºè°±AIæä¾›çš„CogView-4æ¨¡å‹
- Flaskå’Œç›¸å…³Webæ¡†æ¶
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æ–‡æ¡£å’ŒFAQ
2. æäº¤Issue
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**äº«å—AIå›¾åƒç”Ÿæˆçš„ä¹è¶£ï¼** ğŸ¨âœ¨