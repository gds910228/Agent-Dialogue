# é¡¹ç›®æ”¹é€ ä»»åŠ¡è¿›åº¦

## é¡¹ç›®æ¦‚è¿°
å°†ç°æœ‰çš„æ–‡æœ¬åˆ†è¯å™¨é¡¹ç›®æ”¹é€ ä¸ºç½‘ç»œæœç´¢ç³»ç»Ÿï¼Œå¯¹æ¥æ™ºè°±AIçš„ç½‘ç»œæœç´¢APIã€‚

## ä»»åŠ¡çŠ¶æ€

### Done âœ…
- [x] åˆ›å»ºæ™ºè°±ç½‘ç»œæœç´¢å®¢æˆ·ç«¯ (`zhipu_websearch_client.py`)
  - [x] å®ç°åŸºç¡€æœç´¢åŠŸèƒ½
  - [x] æ”¯æŒæœç´¢æ„å›¾åˆ†æ
  - [x] æ”¯æŒæ—¶æ•ˆæ€§è¿‡æ»¤
  - [x] å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
  - [x] ç»“æœæ ¼å¼åŒ–åŠŸèƒ½

- [x] æ”¹é€ ä¸»ç¨‹åº (`main.py`)
  - [x] æ›¿æ¢åˆ†è¯å™¨å®¢æˆ·ç«¯ä¸ºç½‘ç»œæœç´¢å®¢æˆ·ç«¯
  - [x] æ›´æ–°MCPå·¥å…·å‡½æ•°
    - [x] `web_search`: åŸºç¡€ç½‘ç»œæœç´¢
    - [x] `web_search_with_intent`: å¸¦æ„å›¾åˆ†æçš„æœç´¢
    - [x] `web_search_recent`: æœ€è¿‘å†…å®¹æœç´¢
    - [x] `test_websearch_api`: APIè¿æ¥æµ‹è¯•
    - [x] `save_search_results_to_file`: ä¿å­˜æœç´¢ç»“æœ
    - [x] `load_search_results_from_file`: åŠ è½½æœç´¢ç»“æœ
  - [x] æ›´æ–°äº¤äº’å¼æ¨¡å¼åŠŸèƒ½
  - [x] æ›´æ–°æ‰€æœ‰å¤„ç†å‡½æ•°

- [x] æ”¹é€ æœåŠ¡å™¨ (`tokenizer_server.py`)
  - [x] æ›¿æ¢åˆ†è¯å™¨å®¢æˆ·ç«¯ä¸ºç½‘ç»œæœç´¢å®¢æˆ·ç«¯
  - [x] æ›´æ–°APIè·¯ç”±
    - [x] `/api/search`: åŸºç¡€æœç´¢API
    - [x] `/api/search-with-intent`: æ„å›¾åˆ†ææœç´¢API
    - [x] `/api/search-filters`: è·å–æœç´¢è¿‡æ»¤é€‰é¡¹
  - [x] æ›´æ–°æœåŠ¡å™¨æè¿°å’Œé…ç½®

- [x] åˆ›å»ºæ–°çš„Webç•Œé¢ (`websearch_interface.html`)
  - [x] ç°ä»£åŒ–è®¾è®¡ä½¿ç”¨Tailwind CSS
  - [x] å“åº”å¼å¸ƒå±€
  - [x] æœç´¢è¡¨å•å’Œé€‰é¡¹
  - [x] å®æ—¶æœç´¢ç»“æœæ˜¾ç¤º
  - [x] æœç´¢æ„å›¾åˆ†æå±•ç¤º
  - [x] é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
  - [x] ç§»åŠ¨ç«¯å‹å¥½è®¾è®¡

- [x] æ›´æ–°é¡¹ç›®æ–‡æ¡£ (`README.md`)
  - [x] æ›´æ–°é¡¹ç›®æè¿°å’ŒåŠŸèƒ½ä»‹ç»
  - [x] æ›´æ–°APIæ–‡æ¡£
  - [x] æ›´æ–°MCPå·¥å…·è¯´æ˜
  - [x] æ·»åŠ æœç´¢å‚æ•°è¯´æ˜
  - [x] æ›´æ–°ä½¿ç”¨ç¤ºä¾‹

### Doing ğŸ”„
- [ ] æµ‹è¯•å’ŒéªŒè¯
  - [ ] æµ‹è¯•æ‰€æœ‰APIæ¥å£
  - [ ] éªŒè¯MCPæœåŠ¡å™¨åŠŸèƒ½
  - [ ] æµ‹è¯•Webç•Œé¢äº¤äº’
  - [ ] éªŒè¯æœç´¢ç»“æœæ ¼å¼

### To Do ğŸ“‹
- [ ] ä¼˜åŒ–å’Œå®Œå–„
  - [ ] æ·»åŠ æœç´¢ç»“æœç¼“å­˜
  - [ ] ä¼˜åŒ–é”™è¯¯å¤„ç†
  - [ ] æ·»åŠ æœç´¢å†å²åŠŸèƒ½
  - [ ] æ€§èƒ½ä¼˜åŒ–

- [ ] æ–‡æ¡£å®Œå–„
  - [ ] æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
  - [ ] åˆ›å»ºAPIä½¿ç”¨æŒ‡å—
  - [ ] æ·»åŠ æ•…éšœæ’é™¤æ–‡æ¡£

## æŠ€æœ¯å®ç°ç»†èŠ‚

### APIå¯¹æ¥
- **æ¥å£åœ°å€**: `https://open.bigmodel.cn/api/paas/v4/web_search`
- **è®¤è¯æ–¹å¼**: Bearer Token
- **è¯·æ±‚å‚æ•°**:
  - `search_query`: æœç´¢æŸ¥è¯¢å­—ç¬¦ä¸²
  - `search_intent`: æ˜¯å¦å¯ç”¨æœç´¢æ„å›¾åˆ†æ
  - `count`: è¿”å›ç»“æœæ•°é‡ (1-50)
  - `search_recency_filter`: æ—¶æ•ˆæ€§è¿‡æ»¤ (noLimit/day/week/month/year)

### å“åº”æ ¼å¼
```json
{
  "id": "string",
  "created": 123,
  "request_id": "string",
  "search_intent": [
    {
      "query": "string",
      "intent": "SEARCH_ALL",
      "keywords": "string"
    }
  ],
  "search_result": [
    {
      "title": "string",
      "content": "string",
      "link": "string",
      "media": "string",
      "icon": "string",
      "refer": "string",
      "publish_date": "string"
    }
  ]
}
```

### ä¸»è¦æ”¹åŠ¨
1. **å®¢æˆ·ç«¯æ›¿æ¢**: ä» `ZhipuTokenizerClient` æ”¹ä¸º `ZhipuWebSearchClient`
2. **åŠŸèƒ½è½¬æ¢**: ä»æ–‡æœ¬åˆ†è¯è½¬ä¸ºç½‘ç»œæœç´¢
3. **ç•Œé¢é‡è®¾è®¡**: ä»åˆ†è¯å™¨ç•Œé¢æ”¹ä¸ºæœç´¢ç•Œé¢
4. **APIé‡æ„**: ä»åˆ†è¯APIæ”¹ä¸ºæœç´¢API
5. **MCPå·¥å…·æ›´æ–°**: æ‰€æœ‰å·¥å…·å‡½æ•°éƒ½å·²æ›´æ–°ä¸ºæœç´¢ç›¸å…³åŠŸèƒ½

## é¡¹ç›®ç»“æ„
```
Web-Search-MCP/
â”œâ”€â”€ main.py                      # ä¸»ç¨‹åºå…¥å£ (å·²æ›´æ–°)
â”œâ”€â”€ tokenizer_server.py          # WebæœåŠ¡å™¨ (å·²æ›´æ–°)
â”œâ”€â”€ zhipu_websearch_client.py    # ç½‘ç»œæœç´¢å®¢æˆ·ç«¯ (æ–°å¢)
â”œâ”€â”€ websearch_interface.html     # æœç´¢ç•Œé¢ (æ–°å¢)
â”œâ”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£ (å·²æ›´æ–°)
â”œâ”€â”€ config.json.example          # é…ç½®ç¤ºä¾‹
â”œâ”€â”€ requirements.txt             # ä¾èµ–åˆ—è¡¨
â””â”€â”€ docs/
    â””â”€â”€ tasks.md                 # ä»»åŠ¡è¿›åº¦ (æœ¬æ–‡ä»¶)
```

## ä¸‹ä¸€æ­¥è®¡åˆ’
1. è¿›è¡Œå…¨é¢æµ‹è¯•ï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
2. ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œé”™è¯¯å¤„ç†
3. æ·»åŠ æ›´å¤šé«˜çº§æœç´¢åŠŸèƒ½
4. å®Œå–„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—